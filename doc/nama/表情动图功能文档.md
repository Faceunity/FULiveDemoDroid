# 表情动图文档

## 目录

[TOC]



## 1.功能介绍

表情动图是使用2D blendshape技术，可以通过用户自主添加五官点位，使静态照片活过来的技术。

## 2.接口介绍

异图的接口都是封装在bundle中，只需要调用bundle的set接口即可

### set接口

```
group_type:[],     //输入类型的数组   0-6 对应             		'leye','reye','nose','mouth','lbrow','rbrow','face'
group_points:[],	  //所有输入点，点数由group_type决定
target_width:0,	      //输入图片的宽
target_height:0,	  //输入图片的高
is_front:1,			//是否是前置摄像头，在切换摄像头时设置 for android，ios不用设置
is_use_cartoon：1.0  //0为关闭1为开启，开启后会使用卡通点位运行，闭眼效果更好
use_interpolate2：1.0 //插值开关，0为关闭1为开启，开启会给点加一个包围圈，但是五官距离过近的时候容易互相影响，关闭时会不加包围圈，单五官时影响会比较大


```

### 设置输入图片接口

```
对应参数：tex_input
使用底层接口fuCreateTexForItem来传递RGBA buffer
```



## 3.生成点位方法

客户端根据五官图片的旋转，缩放，平移来算出当前点的位置。图片坐标系要使用图片**左上角**点作为原点

## 4.固有模板保存方式

需要客户端同学保存下来

1. 输入的图片
2. 图片宽高
3. group_type数组
4. group_points数组

在下次加载的时候将这些信息直接set进bundle即可

## 5.制作模板注意事项

1. 眼睛形状越接近人的眼睛效果越好（椭圆）
2. 五官之间不要距离过近，会相互影响，可能会出现交叉的情况
3. 注意五官数量限制，每一种限制为3个